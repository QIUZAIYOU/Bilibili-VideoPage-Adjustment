# 哔哩哔哩（bilibili.com）播放页调整

一个简单的小脚本，主要是给自己用的。

**推荐使用 Violentmonkey(暴力猴) 加载本脚本，使用 Tampermonkey 可能会导致无法预料的错误。**

**视频会静音为浏览器安全行为，与本脚本无关，在浏览器地址栏左侧(不同浏览器位置及展现方式可能不同)网站权限中选择“允许音频和视频”即可。**

**如果发现脚本不能用，说明你的播放页面已经更新为新版。因本人多个账号均未收到新版播放页更新推送，无法进行适配，故暂时下架。**

**旧版可以使用（页面右侧没有‘新版反馈’或‘回到旧版’按钮即为旧版）。**

1.自动定位到播放器（进入播放页，可自动定位到播放器，可设置偏移量及是否在点击主播放器时定位）。

2.可设置是否自动选择最高画质。

3.可设置播放器默认模式。

部分代码借鉴了油小猴的网盘智能识别助手，特此感谢。

## 历史更新

### 2023

`02.08 22:28`：1.优化代码，修复部分函数会重复执行的问题。2.「网页全屏模式解锁」功能开启状态下视频控制条「进入全屏」按钮旁新增「前往评论」按钮，可点击此按钮直达评论区，避免滚动鼠标滚轮出现调整音量提示。

`02.08 09:52`：适配「稍后再看」视频播放页面。

### 2022

`10.14 11:40`：开启「网页全屏模式解锁」功能后，下滑新增迷你播放器显示，不过比较简陋，只支持暂停/播放操作，有条件的建议还是直接使用浏览器自带的小窗播放功能。

`10.14 09:53`：修复开启「自动选择最高画质」功能后，未勾选 「是否包含4K」及「是否包含8K」的情况下错误选择 8K 画质的问题。

`10.11 20:45`：修复开启「网页全屏模式解锁」功能后，网页全屏状态下切换其他模式页面错乱的问题。

`09.30 23:00`：新增「网页全屏模式解锁」功能，网页全屏模式下可以滑动滚动条查看下方评论等内容（因番剧播放页网页全屏时下方评论仍未加载所以暂不支持），需在设置里重新勾选播放器默认模式并保存后生效（如不生效多保存几次并清除浏览器缓存试试）。

`09.30 10:10`：重构部分代码，修复积累问题。

`08.09 09:15`：修复最高画质是否包含4K切换问题。

`08.08 17:00`：加入浏览器标签页激活状态检测，调整设置将在当前标签页激活时应用。

`08.02 20:56`：适配新版播放页改动。

`07.18 10:16`：尝试修复自动定位播放器概率失效的问题。

`07.15 16:27`：尝试修复自动切换播放器模式概率失效的问题。

`07.09 22:50`：修复自动定位会在首次定位成功后重复执行的问题。
